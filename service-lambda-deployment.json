{"options":[{"enabled":false,"definition":{"id":"5d58cc01-7c75-450c-be18-a388ddb129ec"},"inputs":{"branchFilters":"[\"+refs/heads/*\"]","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"a9db38f9-9fdc-478c-b0f9-464221e58316"},"inputs":{"workItemType":"2047580","assignToRequestor":"true","additionalFields":"{}"}}],"triggers":[{"branchFilters":["+refs/heads/integration"],"pathFilters":["+services/GatewayService"],"batchChanges":false,"maxConcurrentBuildsPerBranch":1,"pollingInterval":0,"triggerType":2}],"variables":{"scepter.environment":{"value":"development"},"scepter.provider":{"value":"aws"},"scepter.service":{"value":"GatewayService"},"system.debug":{"value":"false","allowOverride":true}},"retentionRules":[{"branches":["+refs/heads/*"],"artifacts":[],"artifactTypesToDelete":["FilePath","SymbolStore"],"daysToKeep":10,"minimumToKeep":1,"deleteBuildRecord":true,"deleteTestResults":true}],"properties":{},"tags":[],"metrics":[{"name":"CurrentBuildsInQueue","scope":"refs/heads/integration","intValue":0},{"name":"CurrentBuildsInProgress","scope":"refs/heads/integration","intValue":0}],"_links":{"self":{"href":""},"web":{"href":""},"editor":{"href":""}},"jobAuthorizationScope":1,"jobTimeoutInMinutes":60,"jobCancelTimeoutInMinutes":5,"process":{"phases":[{"steps":[{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Build development tools","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"1.*","definitionType":"task"},"inputs":{"filename":"apt-get","arguments":"update","workingFolder":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Install g++","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"1.*","definitionType":"task"},"inputs":{"filename":"apt-get","arguments":"-y install g++-4.8","workingFolder":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Install libsecret-1-dev","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"1.*","definitionType":"task"},"inputs":{"filename":"apt-get","arguments":"-y install libsecret-1-dev","workingFolder":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Install build essentials","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"1.*","definitionType":"task"},"inputs":{"filename":"apt-get","arguments":"install build-essential libssl-dev","workingFolder":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Download NVM","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"1.*","definitionType":"task"},"inputs":{"filename":"curl","arguments":" -o nvm.sh https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh","workingFolder":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Install NVM","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"1.*","definitionType":"task"},"inputs":{"filename":"bash","arguments":"nvm.sh","workingFolder":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Set node to v6.10","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"},"inputs":{"script":"export NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\" ] && \\. \"$NVM_DIR/bash_completion\"\nnvm install 6.10","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Use Yarn 1.x","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"2ec1147b-5c33-41df-94b5-676758d87c1b","versionSpec":"2.*","definitionType":"task"},"inputs":{"versionSpec":"1.x","checkLatest":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Install Base Dependencies","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"0888c9a9-d1b2-4567-aae2-beadcb2059b3","versionSpec":"2.*","definitionType":"task"},"inputs":{"ProjectDirectory":"$(Parameters.ProjectDirectory)","Arguments":"install","ProductionMode":"false","customRegistry":"useNpmrc","customFeed":"","customEndpoint":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Yarn Recursive","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"0888c9a9-d1b2-4567-aae2-beadcb2059b3","versionSpec":"2.*","definitionType":"task"},"inputs":{"ProjectDirectory":"$(Parameters.ProjectDirectory)","Arguments":"yarn-recursive","ProductionMode":"false","customRegistry":"useNpmrc","customFeed":"","customEndpoint":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Scepter cloud configure","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"0888c9a9-d1b2-4567-aae2-beadcb2059b3","versionSpec":"2.*","definitionType":"task"},"inputs":{"ProjectDirectory":"$(Parameters.ProjectDirectory)","Arguments":"scepter cloud:configure $(scepter.environment) $(scepter.provider)","ProductionMode":"false","customRegistry":"useNpmrc","customFeed":"","customEndpoint":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Scepter Deploy Service","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"0888c9a9-d1b2-4567-aae2-beadcb2059b3","versionSpec":"2.*","definitionType":"task"},"inputs":{"ProjectDirectory":"$(Parameters.ProjectDirectory)","Arguments":"scepter service:deploy $(scepter.service) $(scepter.provider) $(scepter.environment)","ProductionMode":"false","customRegistry":"useNpmrc","customFeed":"","customEndpoint":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Publish Test Results","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"0b0f01ed-7dde-43ff-9cbb-e48954daf9b1","versionSpec":"2.*","definitionType":"task"},"inputs":{"testRunner":"JUnit","testResultsFiles":"services/$(scepter.service)/junit.xml","searchFolder":"$(Parameters.searchFolder)","mergeTestResults":"false","testRunTitle":"GatewayService Test Results","platform":"","configuration":"","publishRunAttachments":"true"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Publish code coverage","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"2a7ebc54-c13e-490e-81a5-d7561ab7cd97","versionSpec":"1.*","definitionType":"task"},"inputs":{"codeCoverageTool":"Cobertura","summaryFileLocation":"$(Parameters.summaryFileLocation)","reportDirectory":"$(System.DefaultWorkingDirectory)/services/$(scepter.service)/coverage","additionalCodeCoverageFiles":"","failIfCoverageEmpty":"true"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Publish Artifact: $(scepter.service)","timeoutInMinutes":0,"condition":"succeeded()","refName":"","task":{"id":"2ff763a7-ce83-4e1f-bc89-0ae63477cebe","versionSpec":"1.*","definitionType":"task"},"inputs":{"PathtoPublish":"services/$(scepter.service)/.serverless","ArtifactName":"$(scepter.service)","ArtifactType":"Container","TargetPath":"\\\\my\\share\\$(Build.DefinitionName)\\$(Build.BuildNumber)","Parallel":"false","ParallelCount":"8"}}],"name":"Install dependencies and run cloud command","refName":"Phase_1","condition":"succeeded()","target":{"executionOptions":{"type":0},"allowScriptsAuthAccessOption":false,"type":1},"jobAuthorizationScope":"projectCollection","jobCancelTimeoutInMinutes":1}],"type":1},"repository":{"properties":{"cleanOptions":"0","labelSources":"0","labelSourcesFormat":"$(build.buildNumber)","reportBuildStatus":"true","gitLfsSupport":"false","skipSyncSource":"false","checkoutNestedSubmodules":"true","fetchDepth":"0"},"id":"0faf243f-3a53-49af-8de6-449aea9441df","type":"TfsGit","name":"Scepter","url":"","defaultBranch":"refs/heads/integration","clean":"false","checkoutSubmodules":true},"processParameters":{"inputs":[{"aliases":[],"options":{},"properties":{},"name":"ProjectDirectory","label":"Project Directory","defaultValue":"","type":"filePath","helpMarkDown":"Source directory","visibleRule":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"searchFolder","label":"Search folder","defaultValue":"$(System.DefaultWorkingDirectory)","type":"string","helpMarkDown":"Folder to search for the test result files. Defaults to $(System.DefaultWorkingDirectory).","visibleRule":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"summaryFileLocation","label":"Summary File","defaultValue":"$(System.DefaultWorkingDirectory)/services/$(scepter.service)/coverage/cobertura-coverage.xml","required":true,"type":"string","helpMarkDown":"Path of the summary file containing code coverage statistics, such as line, method, and class coverage. The value may contain minimatch patterns. For example: `$(System.DefaultWorkingDirectory)/MyApp/**/site/cobertura/coverage.xml`","visibleRule":"","groupName":""}]},"quality":1,"authoredBy":{"displayName":"Daniel Fredriksen","url":"","_links":{"avatar":{"href":""}},"id":"","uniqueName":"","imageUrl":"","descriptor":"aad.Njk4YmNkYmQtMzJmMC03YjE1LTk4ZjktYTIyNWVkY2JjZmFm"},"drafts":[],"queue":{"_links":{"self":{"href":""}},"id":65,"name":"Hosted Linux Preview","url":"","pool":{"id":3,"name":"Hosted Linux Preview","isHosted":true}},"id":6,"name":"Scepter Service Deployment to AWS","url":"","uri":"vstfs:///Build/Definition/6","path":"\\","type":2,"queueStatus":0,"revision":41,"createdDate":"2018-04-24T01:53:30.090Z","project":{"id":"","name":"Scepter","description":"Enterprise Management Software","url":"","state":"wellFormed","revision":292,"visibility":0}}